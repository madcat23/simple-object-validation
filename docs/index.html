<!DOCTYPE html>
<html>
  <head>
    <title>simple object validation API</title>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/xcode.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="js/scripts.js"></script>

    <style type='text/css'>
    pre {
      overflow-x: auto;
    }
    pre code {
        white-space: pre;
    }
</style>
  </head>
  <body>
    <div class="nav-side-menu">
      <div class="brand">
        <img src="logo.png" width="80" height="80" />
        <p style="font-weight: bold;">simple object validation</p>
        <p><strong>API Docs</strong></p>
      </div>
      <i class="fa fa-bars fa-2x toggle-btn" data-toggle="collapse" data-target="#menu-content"></i>
      <div class="menu-list" style="padding-bottom: 20px;">
        <div id="menu-content" class="menu-content collapse out">
          <a href="#examples" class="headline"><i class="fa fa-code"></i> Examples</a>
          <a href="#simple-registration-form">Simple registration form</a>
          <a href="#i18n">I18n</a>

          <a href="#validators" class="headline"><i class="fa fa-puzzle-piece"></i> Validators</a>
          <a href="#is-required">isRequired</a>
          <a href="#is-alphanumeric">isAlphanumeric</a>
          <a href="#is-numeric">isNumeric</a>
          <a href="#is-integer">isInteger</a>
          <a href="#is-between">isBetween</a>
          <a href="#is-greater-than-or-equal">isGreaterThanOrEqual</a>
          <a href="#is-less-than-or-equal">isLessThanOrEqual</a>
          <a href="#bring-your-own-validator">Bring your own validator</a>
          
          <a href="#core" class="headline"><i class="fa fa-cube"></i> Core API</a>
          <a href="#assemble">assemble</a>
          <a href="#chain">chain</a>
          <a href="#each">each</a>
          <a href="#match">match</a>
          <a href="#validator">validator</a>
        </div>
      </div>
    </div>
    <div class="content">

<!-- BEGIN CONTENT -->




<h1 id="examples" class="top">Examples</h1>


<!-- *************************************************************************************************************************** -->
<h2 id="simple-registration-form">Simple registration form</h2>
<pre><code class="javascript">import { assemble, chain, isRequired, isInteger, isGreaterThanOrEqual } from 'simple-object-validation'

const isValidCustomer = assemble({
  name: isRequired('Name'),
  age: chain([
    isRequired,
    isInteger,
    isGreaterThanOrEqual(18)
  ])('Age'),
})

isValidCustomer({ age: 17 }) // { name: 'Name is required.', age: 'Age must be greater than or equal 18.' }

isValidCustomer({ name: 'Mathew', age: 18 }) // {}
</code></pre>
<!-- *************************************************************************************************************************** -->


<!-- *************************************************************************************************************************** -->
<h2 id="i18n">I18n</h2>
<p>This is how you can use an internationalization library like <a target="_blank" href="https://github.com/i18next/i18next">i18next</a> in combination with simple-object-validation. Every validator can be called with a configuration object that contains a messageCreator and an optional nameTransformer property. This call will return a <strong>new validator</strong> that has the same behaviour as the original one, but will return an internationalized error message.</p>
<pre><code class="javascript">import { isRequired, isGreaterThanOrEqual } from 'simple-object-validation'
import i18next from 'i18next'

const nameTransformer = name => i18next.t(name)

const i18n_required = isRequired({
  messageCreator: (param, name, value) => i18next.t('{{name}} is required.', { name }), nameTransformer
})

const i18n_greaterThanOrEqual = isGreaterThanOrEqual({
  messageCreator: (param, name, value) => i18next.t('{{name}} must be greater than or equal to {{param}}.', { name, param }), nameTransformer
})

export { 
  i18n_required as isRequired,
  i18n_greaterThanOrEqual as isGreaterThanOrEqual
}


import { isRequired, isGreaterThanOrEqual } from './i18n-validation'

isRequired('Zip code')('')            // 'Feld Postleitzahl ist ein Pflichtfeld.'
isGreaterThanOrEqual(18)('Age')('17') // 'Feld Alter muss größer oder gleich 18 sein.'

</code></pre>
<!-- *************************************************************************************************************************** -->




<h1 id="validators">Validators</h1>


<!-- *************************************************************************************************************************** -->
<h2 id="is-required">isRequired</h2>
<p>Checks if a value is set. That means if is not null, not undefined and not an empty String.</p>
<pre><code class="javascript">import { isRequired } from 'simple-object-validation'

isRequired('Name')(null)      // 'Name is required.'
isRequired('Name')(undefined) // 'Name is required.'
isRequired('Name')('')        // 'Name is required.'
isRequired('Name')(false)     // undefined
isRequired('Name')(42)        // undefined
isRequired('Name')('Mathew')  // undefined
</code></pre>
<!-- *************************************************************************************************************************** -->



<!-- *************************************************************************************************************************** -->
<h2 id="is-alphanumeric">isAlphanumeric</h2>
<p>Determines wether the given value is alphanumeric.</p>
<pre><code class="javascript">import { isAlphanumeric } from 'simple-object-validation'

isAlphanumeric('Code')('...')      // 'Code must be alphanumeric.'
isAlphanumeric('Code')('%$!')      // 'Code must be alphanumeric.'
isAlphanumeric('Code')(' ')        // 'Code must be alphanumeric.'
isAlphanumeric('Code')('a1B2c3D4') // undefined
</code></pre>
<!-- *************************************************************************************************************************** -->



<!-- *************************************************************************************************************************** -->
<h2 id="is-numeric">isNumeric</h2>
<p>Determines wether the given value is numeric. Strings are allowed.</p>
<pre><code class="javascript">import { isNumeric } from 'simple-object-validation'

isNumeric('Number')('abc')  // 'Number must be numeric.'
isNumeric('Number')('%$!')  // 'Number must be numeric.'
isNumeric('Number')(' ')    // 'Number must be numeric.'
isNumeric('Number')(42)     // undefined
isNumeric('Number')('42.0') // undefined
</code></pre>
<!-- *************************************************************************************************************************** -->



<!-- *************************************************************************************************************************** -->
<h2 id="is-integer">isInteger</h2>
<p>Determines wether the given value is an integer. Strings are allowed.</p>
<pre><code class="javascript">import { isInteger } from 'simple-object-validation'

isInteger('Number')('abc')  // 'Number must be an integer.'
isInteger('Number')('%$!')  // 'Number must be an integer.'
isInteger('Number')('1.')   // 'Number must be an integer.'
isInteger('Number')('42.0') // 'Number must be an integer.'
isInteger('Number')(42.0)   // undefined
isInteger('Number')(42)     // undefined
isInteger('Number')('42')   // undefined
</code></pre>
<!-- *************************************************************************************************************************** -->



<!-- *************************************************************************************************************************** -->
<h2 id="is-between">isBetween</h2>
<p>Checks if a given value is between a minimum and a maximum value.</p>
<pre><code class="javascript">import { isBetween } from 'simple-object-validation'

isBetween({ min: 0, max: 100 })('Percentage')('-1')  // 'Percentage must be between 0 and 100.'
isBetween({ min: 0, max: 100 })('Percentage')(101)   // 'Percentage must be between 0 and 100.'
isBetween({ min: 0, max: 100 })('Percentage')(100.1) // 'Percentage must be between 0 and 100.'
isBetween({ min: 0, max: 100 })('Percentage')(42)    // undefined
isBetween({ min: 0, max: 100 })('Percentage')('1')   // undefined
</code></pre>
<!-- *************************************************************************************************************************** -->



<!-- *************************************************************************************************************************** -->
<h2 id="is-greater-than-or-equal">isGreaterThanOrEqual</h2>
<p>Checks if a given value is greater than or equal to another value.</p>
<pre><code class="javascript">import { isGreaterThanOrEqual } from 'simple-object-validation'

isGreaterThanOrEqual(1)('Number')('-1') // 'Number must be greater than or equal to 1.'
isGreaterThanOrEqual(1)('Number')(0)    // 'Number must be greater than 1.'
isGreaterThanOrEqual(1)('Number')(1)    // undefined
isGreaterThanOrEqual(1)('Number')(123)  // undefined
</code></pre>



<!-- *************************************************************************************************************************** -->
<h2 id="is-less-than-or-equal">isLessThanOrEqual</h2>
<p>Checks if a given value is less than or equal to another value.</p>
<pre><code class="javascript">import { isLessThanOrEqual } from 'simple-object-validation'

isLessThanOrEqual(2048)('Number')('2500')  // 'Number must be less than or equal to 2048.'
isLessThanOrEqual(2048)('Number')(1000000) // 'Number must be less than or equal to 2048.'
isLessThanOrEqual(2048)('Number')(1)       // undefined
isLessThanOrEqual(2048)('Number')(123)     // undefined
</code></pre>
<!-- *************************************************************************************************************************** -->



<!-- *************************************************************************************************************************** -->
<h2 id="bring-your-own-validator">Bring your own validator</h2>
<p>You can easily build your own validators using the built-in <a href="#validator">validator</a> factory function.</p>
<pre><code class="javascript">import { validator } from 'simple-object-validation'

// without parameter:
const containsLetterA = validator(
  (value, param) => value.toLowerCase().indexOf('a') > -1,
  (param, name, value) => `${name} does not contain letter A.`
)

// with parameter:
const containsLetter = validator(
  (value, param) => value.toLowerCase().indexOf(param.toLowerCase()) > -1,
  (param, name, value) => `${name} does not contain letter ${param.toUpperCase()}.`
)

containsLetterA('Field X')('foo')     // 'Field X does not contain letter A.'
containsLetter('y')('Field X')('bar') // 'Field X does not contain letter Y.'

</code></pre>
<p>See <a href="#validator">validator</a> for more information.</p>
<!-- *************************************************************************************************************************** -->




<h1 id="core">Core API</h1>


<!-- *************************************************************************************************************************** -->
<h2 id="assemble">assemble</h2>
<p>This function is used to combine validators in order to validate whole objects. Your input is an object with some values. Your output is an object with some error messages. You can also validate nested objects. The error messages will then be nested as well.</p>
<pre><code class="javascript">import { assemble, isRequired, isInteger } from 'simple-object-validation'

const isValidUser = assemble({
  name: isRequired('Full name'),
  age: isInteger('Age'),
  address: assemble({
    addressLine1: isRequired('Address Line 1'),
    zipCode: isRequired('Zip code'),
    city: isRequired('City'),
  }),
})

isValidUser({ age: 17 }) // { name: 'Full name is required.', address: { addressLine1: 'Address Line 1 is required.', zipCode: 'Zip code is required.', city: 'City is required.' } }
isValidUser({ name: 'Angela Merkel', age: 63, address: { addressLine1: 'Willy-Brandt-Straße 1', zipCode: '10557', city: 'Berlin' } }) // undefined
</code></pre>
<!-- *************************************************************************************************************************** -->



<!-- *************************************************************************************************************************** -->
<h2 id="chain">chain</h2>
<p>If there are several validators that need to be applied to a value, you can use the chain function.</p>
<pre><code class="javascript">import { chain, isRequired, isInteger, isGreaterThanOrEqual } from 'simple-object-validation'

const isValidAge = chain([
  isRequired,
  isInteger,
  isGreaterThanOrEqual(18)
])

isValidAge('Age')()    // 'Age is required.'
isValidAge('Age')('a') // 'Age must be an integer.'
isValidAge('Age')(17)  // 'Age must be greater than or equal to 18.'
isValidAge('Age')(18)  // undefined
</code></pre>
<!-- *************************************************************************************************************************** -->



<!-- *************************************************************************************************************************** -->
<h2 id="each">each</h2>
<p>If you want to validate an array of values you can use each.</p>
<pre><code class="javascript">import { each, isAlphanumeric } from 'simple-object-validation'

const isValidCodeArray = each(i => isAlphanumeric(`Code number ${i + 1}`))

isValidCodeArray(['123456Seven', '%!()', '42']) // [undefined, 'Code number 2 must be alphanumeric.', undefined]
isValidCodeArray(['123456Seven', 'abc', '42'])  // [undefined, undefined, undefined]
</code></pre>
<!-- *************************************************************************************************************************** -->



<!-- *************************************************************************************************************************** -->
<h2 id="match">match</h2>
<p>If you want to map each value of an array to a specific validator, you can use match.</p>
<pre><code class="javascript">import { match, isRequired, isNumeric, isGreaterThanOrEqual, isLessThanOrEqual } from 'simple-object-validation'

const isValidTuple = match([
  isRequired('Value 1'),
  isNumeric('Value 2'),
  isGreaterThanOrEqual(0)('Value 3'),
  isLessThanOrEqual(10)('Value 4'),
])

isValidTuple([undefined, '%!()', '0', '42']) // ['Value 1 is required.', 'Value 2 must be numeric.', undefined, 'Value 4 must be less than or equal to 10.']
isValidTuple(['foo', '1', '1', '1'])         // [undefined, undefined, undefined, undefined]
</code></pre>
<!-- *************************************************************************************************************************** -->



<!-- *************************************************************************************************************************** -->
<h2 id="validator">validator</h2>
<p>You can use this function to create new validators. These validators can then be easily combined with assemble, chain, each and match.</p>
<h3>Definition</h3>
<div class="definition">
  (checkFunction: <em>(value: <em>any</em>, param: <em>any</em>) => boolean</em>, messageCreator: <em>(param: <em>any</em>, name: <em>string</em>, value: <em>any</em>) => string</em>)
  <br />=> (param: <em>any</em>) => (name: <em>string</em>) => (value: <em>any</em>) => undefined | string
</div>
<p>
  Okay, okay! This looks difficult at first sight, definitely. But it totally makes sense. This is how it works:
</p>
<p>
  Let's start with line two of the definition which describes the validator that is created using validator().
  Generally in simple-object-validation every validator first takes a <strong>configuration parameter</strong> to further specify its behaviour. This is going to return another function that waits for being called with the <strong>field name</strong>. That call however will return a function that finally wants to be called with a <strong>value</strong>. It will either return <strong>undefined</strong> or an <strong>error message</strong>.
</p>
<p>
  BUT: You don't have to care about that at all. You only have to provide two functions (as you can see in line one). The first function (checkFunction) basically provides the validation logic while the second function (messageCreator) creates an error message based on the variables that are passed to the validator during the configuration process.
</p>
<p>
  Just look at this example:
</p>
<pre><code class="javascript">import { validator } from 'simple-object-validation'

const hasMinLength = validator(
  (value, param) => value.length >= param,
  (param, name, value) => `${name} must have a minimum length of ${param}!`
)

hasMinLength(4)('My string')('foo') // 'My string must have a minimum length of 4!'
hasMinLength(4)('My string')('a longer string') // undefined
</code></pre>
<h3>Validator without configuration parameter</h3>
<p>
  But a configuration does not always make sense. In some cases you could just leave it away because it's optional or maybe you don't need it at all (e. g. isRequired). So if you call the validator directly with a field name instead this will be detected by the validator and it is going to behave like if it had been parameterized (with undefined!) before. You can see that in the following example:
</p>
<pre><code class="javascript">import { validator } from 'simple-object-validation'

const isMeaningOfLife = validator(
  (value, param) => value === 42,
  (param, name, value) => `${name} must be the meaning of life!`
)

isMeaningOfLife('Magic Number')(3.14) // 'Magic Number must be the meaning of life'
isMeaningOfLife('Magic Number')(42) // undefined
</code></pre>
<p>
  As you can see, no configuration parameter was passed to the validator. Instead it was called directly with the field name. Like this you can have validators with parameters and ones without next to each other like in <a href="#simple-registration-form">this example</a>.
</p>
<h3 style="color: #ee6666;">Important note about strings as configuration parameters</h3>
<p>
  The validator detects a deliberately missing configuration parameter by testing for a <strong>string</strong>. So in this situation a string is always interpreted as the field name. If you want to use a string as a parameter you'll have to configure the validator like this:
</p>
<pre><code class="javascript">import { validator } from 'simple-object-validation'
  
const isEqualToString = validator(
  (value, param) => value === param,
  {
    expectParameter: true,
    messageCreator: (param, name, value) => `${name} must be equal to ${param}!`
  }
)

isEqualToString('foo')('Foobar')('bar') // 'Foobar must be equal to foo'
isEqualToString('foo')('Foobar')('foo') // undefined
</code></pre>
<p>
  So there is one little disadvantage here: If you want to use strings as parameters you cannot make them optional.
</p>
<!-- *************************************************************************************************************************** -->



<!-- END CONTENT -->



    </div>

    <script type="text/javascript">
     
    </script>
  </body>
</html>